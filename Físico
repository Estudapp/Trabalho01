CREATE DATABASE Cronograma;
USE Cronograma;

CREATE TABLE Ranking (
    Colocacao_no_Ranking INT,
    Id_Ranking INT PRIMARY KEY
);

CREATE TABLE Desempenho (
    Horas_Dedicadas INT,
    Pontos_por_ajudar INT,
    Pontos_por_exercicios INT,
    Soma_de_Pontos INT,
    Id_Desempenho INT PRIMARY KEY
);

CREATE TABLE Disciplina (
    Nivel_de_Dificuldade INT,
    Horas_a_dedicar INT,
    Conteudo VARCHAR(400),
    Exercicios VARCHAR(400),
    Id_disciplina INT PRIMARY KEY,
    Nome VARCHAR(20)
);

CREATE TABLE Usuario (
    Horas_livres INT,
    Id_Usuario VARCHAR(10) PRIMARY KEY,
    Nome VARCHAR(20),
    Sexo VARCHAR(20),
    Nivel_de_Escolaridade VARCHAR(30),
    Data_de_Nascimento INT,
    Senha INT,
    Email VARCHAR(20)
);

CREATE TABLE Matricula (
    FK_Disciplina_Id_disciplina INT,
    FK_Usuario_Id_Usuario VARCHAR(10)
);

CREATE TABLE Usuario_Desempenho (
    FK_Usuario_Id_Usuario VARCHAR(10),
    FK_Desempenho_Id_Desempenho INT
);

CREATE TABLE Usuario_Ranking (
    FK_Usuario_Id_Usuario VARCHAR(10),
    FK_Ranking_Id_Ranking INT
);
 
ALTER TABLE Matricula ADD CONSTRAINT FK_Matricula_0
    FOREIGN KEY (FK_Disciplina_Id_disciplina)
    REFERENCES Disciplina (Id_disciplina)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Matricula ADD CONSTRAINT FK_Matricula_1
    FOREIGN KEY (FK_Usuario_Id_Usuario)
    REFERENCES Usuario (Id_Usuario)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Usuario_Desempenho ADD CONSTRAINT FK_Usuario_Desempenho_0
    FOREIGN KEY (FK_Usuario_Id_Usuario)
    REFERENCES Usuario (Id_Usuario)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Usuario_Desempenho ADD CONSTRAINT FK_Usuario_Desempenho_1
    FOREIGN KEY (FK_Desempenho_Id_Desempenho)
    REFERENCES Desempenho (Id_Desempenho)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Usuario_Ranking ADD CONSTRAINT FK_Usuario_Ranking_0
    FOREIGN KEY (FK_Usuario_Id_Usuario)
    REFERENCES Usuario (Id_Usuario)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE Usuario_Ranking ADD CONSTRAINT FK_Usuario_Ranking_1
    FOREIGN KEY (FK_Ranking_Id_Ranking)
    REFERENCES Ranking (Id_Ranking)
    ON DELETE RESTRICT ON UPDATE RESTRICT;

