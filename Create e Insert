CREATE DATABASE Cronograma;
USE Cronograma;

CREATE TABLE Ranking (
    Colocacao_no_Ranking INT,
    Id_Ranking INT PRIMARY KEY
);

CREATE TABLE Desempenho (
    Horas_Dedicadas INT,
    Pontos_por_ajudar INT,
    Pontos_por_exercicios INT,
    Soma_de_Pontos INT,
    Id_Desempenho INT PRIMARY KEY
);

CREATE TABLE Disciplina (
    Nivel_de_Dificuldade INT,
    Horas_a_dedicar INT,
    Conteudo VARCHAR(400),
    Exercicios VARCHAR(400),
    Id_disciplina INT PRIMARY KEY,
    Nome VARCHAR(20)
);

CREATE TABLE Usuario (
    Horas_livres INT,
    Id_Usuario VARCHAR(10) PRIMARY KEY,
    Nome VARCHAR(20),
    Sexo VARCHAR(20),
    Nivel_de_Escolaridade VARCHAR(30),
    Data_de_Nascimento INT,
    Senha INT,
    Email VARCHAR(20)
);

CREATE TABLE Matricula (
    FK_Disciplina_Id_disciplina INT,
    FK_Usuario_Id_Usuario VARCHAR(10)
);

CREATE TABLE Usuario_Desempenho (
    FK_Usuario_Id_Usuario VARCHAR(10),
    FK_Desempenho_Id_Desempenho INT
);

CREATE TABLE Usuario_Ranking (
    FK_Usuario_Id_Usuario VARCHAR(10),
    FK_Ranking_Id_Ranking INT
);
 
ALTER TABLE Matricula ADD CONSTRAINT FK_Matricula_0
    FOREIGN KEY (FK_Disciplina_Id_disciplina)
    REFERENCES Disciplina (Id_disciplina)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Matricula ADD CONSTRAINT FK_Matricula_1
    FOREIGN KEY (FK_Usuario_Id_Usuario)
    REFERENCES Usuario (Id_Usuario)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Usuario_Desempenho ADD CONSTRAINT FK_Usuario_Desempenho_0
    FOREIGN KEY (FK_Usuario_Id_Usuario)
    REFERENCES Usuario (Id_Usuario)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Usuario_Desempenho ADD CONSTRAINT FK_Usuario_Desempenho_1
    FOREIGN KEY (FK_Desempenho_Id_Desempenho)
    REFERENCES Desempenho (Id_Desempenho)
    ON DELETE SET NULL ON UPDATE CASCADE;
 
ALTER TABLE Usuario_Ranking ADD CONSTRAINT FK_Usuario_Ranking_0
    FOREIGN KEY (FK_Usuario_Id_Usuario)
    REFERENCES Usuario (Id_Usuario)
    ON DELETE RESTRICT ON UPDATE RESTRICT;
 
ALTER TABLE Usuario_Ranking ADD CONSTRAINT FK_Usuario_Ranking_1
    FOREIGN KEY (FK_Ranking_Id_Ranking)
    REFERENCES Ranking (Id_Ranking)
    ON DELETE RESTRICT ON UPDATE RESTRICT;

INSERT INTO Usuario (Horas_livres, Id_Usuario, Nome, Sexo, Nivel_de_Escolaridade, Data_de_Nascimento, Senha, Email)
values(2, 2020, 'Carlos Miguel', 'Masculino', 'Ensino Medio Completo', 1997/10/20, 76876756, 'carmiguel@gmail.com'),
	    (4, 3030, 'Jose Noroegues', 'Masculino', 'Ensino Medio Completo', 1998/10/21, 68866298, 'JoseN@gmail.com'),
	    (3, 1010,'Maria Miranda','Femenino', 'Ensino Superior Completo', 1989/12/07, 12099023, 'Maria_Mira8@yahoo.com');

INSERT INTO Disciplina (Nivel_de_Dificuldade,Horas_a_dedicar,Conteudo,Exercicios,Id_disciplina,Nome)
values(3,3,'Funções Trigonometricas', 'Funções Trigonometricas',20, 'Matemática'),
      (2,3,'Orações Subordinadas', 'Orações Subordinadas', 30, 'Portugues'),
      (3,4,'História da Filosofia','História da Filosofia',40, 'Filosofia');

INSERT INTO desempenho (Horas_Dedicadas,Pontos_por_ajudar,Pontos_por_exercicios,Soma_de_Pontos,Id_Desempenho)
	values (2,30,60,90,09),
		     (3,25,70,95,05),
         (1,30,25,55,03);
           
INSERT INTO Ranking (Colocacao_no_Ranking,Id_Ranking)
values (5,444),
       (10,333),   
       (8,555);    
           
INSERT INTO Matricula (FK_Disciplina_Id_disciplina,FK_Usuario_Id_Usuario)   
values	(20, 2020 ),
		    (30, 3030),
		    (40, 1010);        
           
INSERT INTO Usuario_Desempenho (FK_Usuario_Id_Usuario ,FK_Desempenho_Id_Desempenho)
values	(2020,09),
		    (3030,05),
        (1010,03);
    
    
 INSERT INTO Usuario_Ranking (FK_Usuario_Id_Usuario,FK_Ranking_Id_Ranking)
 values	(2020,444),
		    (3030,555),
        (1010,333);
